<html>
  <head>
    <meta charset="UTF-8">
    <script src="https://unpkg.com/three@0.120.1/build/three.js"></script>
    <link rel="stylesheet" href="semantic/semantic.min.css">
    <link rel="stylesheet" href="semantic/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Rokkitt:wght@300&display=swap" rel="stylesheet">
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      canvas {
        position: absolute;
        height: 100%;
        width: 100%;
      }
      .ui.container{
        font-family: 'Rokkitt', serif;
        font-size: 17px;
      }
    </style>
  </head>
  <body>
    <body class="pushable">
      <div class="ui large inverted top fixed menu">
        <div class="ui container">
          <a class="item" href="/index.html">Home</a>
          <a class="item" href="/pages/branca_de_neve.html">Branca de Neve</a>
          <a class="item" href="/pages/mulan.html">Mulan</a>
          <a class="item" href="/pages/hora_de_aventura.html">Hora de Aventura</a>
          <a class="item" href="/pages/avatar.html">Avatar: a Lenda de Aang</a>
          <a class="item" href="/pages/harry_potter.html">Harry Potter</a>
          <a class="item" href="/pages/vingadores.html">Vingadores</a>
          <a class="item" href="/pages/sobre_a_artista.html">Sobre a Artista</a>
        </div>
      </div>
    </body>
    <canvas></canvas>
    <script src="js/scene.js"></script>
    <script src="js/camera.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/floor.js"></script>
    <script src="js/texture_loader.js"></script>
    <script src="js/octogono.js"></script>
    <script>
      camera.position.y = 40;
      camera.position.x = 0;
      camera.position.z = 0;

      document.addEventListener('mousedown', onMouseDown);
      document.addEventListener('mousemove', onMouseMove);
      document.addEventListener('mouseup', onMouseUp);

      var mouseDown = false,
        lastMoveX = null,
        lastMoveY = null,
        INITIAL_TETA = 1.40,
        INITIAL_PHI = 0.20,
        INITIAL_RADIUS = 1000000,
        cameraRadius = INITIAL_RADIUS,
        vertical = INITIAL_TETA,
        cameraLookAt = new THREE.Vector3(0,40,0),
        horizontal = INITIAL_PHI;


      function onMouseDown(e){
        mouseDown = true;
        lastMoveX = e.clientX;
        lastMoveY = e.clientY;
      }

      function onMouseMove(e){
        if (mouseDown){
          horizontal += (e.x - lastMoveX) / 10000;
          vertical += (e.y - lastMoveY) / 10000;
          if (vertical > (Math.PI/3)*2){
            vertical = (Math.PI/3)*2;
          }
          if (vertical < Math.PI/3){
            vertical = Math.PI/3;
          }
          updateCameraPosition();
          lastMove = e;
        }
      }

      function onMouseUp(e){
        mouseDown = false;
      }
      
      function updateCameraPosition() {
        cameraLookAt.x = cameraRadius * Math.sin(vertical) * Math.cos(horizontal);
        cameraLookAt.z = cameraRadius * Math.sin(vertical) * Math.sin(horizontal);
        cameraLookAt.y = cameraRadius * Math.cos(vertical);
        camera.lookAt(cameraLookAt);
        renderer.render(scene, camera);
      }


      updateCameraPosition();

      // var raycaster = new THREE.Raycaster();
      // var mouse = new THREE.Vector2();

      // function render() {

      //   // update the picking ray with the camera and mouse position
      //   raycaster.setFromCamera( mouse, camera );

      //   // calculate objects intersecting the picking ray
      //   var intersects = raycaster.intersectObjects( scene.children );

      //   for ( var i = 0; i < intersects.length; i++ ) {

      //     intersects[ i ].object.material.color.set( 0xff0000 );
      //     console.log(object);

      //   }

      //   renderer.render( scene, camera );

      // }

      // window.requestAnimationFrame(render);
      // render();

    </script>
  </body>
</html>
